#
# A couple of useful guides & docs:
#
# - Main Bitrise CLI docs: https://github.com/bitrise-io/bitrise/tree/master/_docs
# - Step Development Guideline: https://github.com/bitrise-io/bitrise/blob/master/_docs/step-development-guideline.md
# - Bitrise.yml format spec: https://github.com/bitrise-io/bitrise/blob/master/_docs/bitrise-yml-format-spec.md
# - Bitrise docs: http://devcenter.bitrise.io/
# - Bitrise CLI guides: http://devcenter.bitrise.io/bitrise-cli/

title: |-
  GitHub Android Tagging
summary: |
  This step extracts the version name from the build.gradle.kts file, creates a Git tag based on this version, pushes the tag to the remote repository, and sets the tag name as an environment variable for use in subsequent steps.
description: |
  This step automates the process of extracting the version name from your Android project's build.gradle.kts file, creating and pushing a Git tag based on this version, and setting the tag name as an environment variable for use in subsequent steps of your Bitrise workflow. Ensure that your GitHub repository is correctly configured in your local Git settings and that the correct remote repository URL is set. The step expects the build.gradle.kts file to be located at app/build.gradle.kts, but you can adjust the script if needed. Troubleshooting steps include validating the extracted version name, ensuring authentication is set up to push to GitHub, and verifying that envman is installed and correctly configured in your Bitrise environment. Check the Bitrise build logs to ensure the environment variable is set correctly.
website: https://github.com/stefanosansone/bitrise-step-github-android-tagging
source_code_url: https://github.com/stefanosansone/bitrise-step-github-android-tagging
support_url: https://github.com/stefanosansone/bitrise-step-github-android-tagging/issues

# If this step should be available only for certain project types
# just uncomment this `project_type_tags` section and include all the
# project types supported by the step. If the step can be used for all
# project types then you can just remove this section.
# If no `project_type_tags` specified (or specified as an empty array)
# that means the step can be used for any project type.
# You can find more information about project type tags in the Step Development Guideline:
# https://github.com/bitrise-io/bitrise/blob/master/_docs/step-development-guideline.md
#
# project_type_tags:
#   - ios
#   - macos
#   - android
#   - xamarin
#   - react-native
#   - cordova
#   - ionic
#   - flutter

# Type tags are used for categorizing steps, for easier step discovery in Step Libraries.
# You can find more information about type tags in the Step Development Guideline:
# https://github.com/bitrise-io/bitrise/blob/master/_docs/step-development-guideline.md
type_tags:
  - deploy

# These properties define whether a Step is run in a given Workflow or not.
# You can find more information about this in the documentation here:
# https://devcenter.bitrise.io/en/steps-and-workflows/developing-your-own-bitrise-step/developing-a-new-step.html#setting-conditions-for-running-the-step
#
# is_always_run: false
# is_skippable: false
# run_if: ""

# Use the `deps` property to declare dependencies that you can fetch from an OS dependency manager.
# You can find more information about this in the documentation here:
# https://devcenter.bitrise.io/en/steps-and-workflows/developing-your-own-bitrise-step/developing-a-new-step.html#submodules-and-step-dependencies
#
# deps:
#   brew:
#   - name: cmake
#   apt_get:
#   - name: cmake


toolkit:
  go:
    package_name: github.com/stefanosansone/bitrise-step-github-android-tagging


inputs:
  - remove_string_list: 
    opts:
      title: "Strings to remove"
      summary: List of strings to remove from the app version
      description: |
        Add the list of strings to remove from the app version
      is_expand: true
      is_required: false
      value_options: []
  - gradle_file_path:
    opts:
      title: "Gradle file path"
      summary: Path of you app gradle file containing version number
      is_expand: true
      is_required: true

outputs:
  - GIT_TAG_NAME:
    opts:
      title: "Generated git tag"
      summary: Tag name generated by the step
